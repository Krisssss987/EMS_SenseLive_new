
<div class="content">
  <div class="container-fluid mt-2">
    <mat-card>
      <mat-card-content>
        <mat-tab-group [color]="'primary'" [selectedIndex]="value" (selectedTabChange)="tabChanged($event)">
          <mat-tab label="User Profile">
            
            <mat-card-header class="d-flex align-items-center justify-content-between mb-2">
              <h5 class="flex-grow-1 user-head">User Profile</h5>
              <button mat-mini-fab color="primary" style="margin-top: -5px;" (click)="openUserDialog()" *ngIf="userType=='Admin'"><mat-icon>add</mat-icon></button>
            </mat-card-header>

						<div class="table-container" style="overflow: auto; max-height:68vh;">
              <table mat-table [dataSource]="userData" matSort class="custom-theme-table mat-table">
                <ng-container matColumnDef="usericon">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>User Icon</th>
                    <td mat-cell *matCellDef="let element">
                      <button mat-icon-button color="dark" style="white-space: nowrap;">
                        <mat-icon>account_circle</mat-icon>
                      </button>
                    </td>
                </ng-container>
                
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.firstName }}&nbsp;{{ element.lastName }}</td>
                </ng-container>
                
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>UserName</th>
                    <td mat-cell *matCellDef="let element">{{ element.userName }}</td>
                </ng-container>

                <ng-container matColumnDef="designation">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Designation</th>
                    <td mat-cell *matCellDef="let element">{{ element.designation }}</td>
                </ng-container>

                <ng-container matColumnDef="shift">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Shift</th>
                  <td mat-cell *matCellDef="let element">{{ element.shift }}</td>
                </ng-container>

                <ng-container matColumnDef="contact">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Contact</th>
                  <td mat-cell *matCellDef="let element">{{ element.contactNo }}</td>
              </ng-container>
              
              <ng-container matColumnDef="plant">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Plant</th>
                  <td mat-cell *matCellDef="let element">{{ element.plant }}</td>
              </ng-container>
              
              <ng-container matColumnDef="privileges">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Privileges</th>
                  <td mat-cell *matCellDef="let element">{{ element.privileges}}</td>
              </ng-container>

              <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="UpdateUserDialog(element)">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="deleteUser(element)">
                      <mat-icon style="margin-right: 5px;">delete</mat-icon>
                    </button>
                  </td>
              </ng-container>

                <tr mat-header-row *matHeaderRowDef="userColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: userColumns"></tr>
              </table>
            </div>
            <mat-paginator #userPaginator [pageSize]="10" showFirstLastButtons></mat-paginator>
          </mat-tab>


          <mat-tab label="Feeder Configuration">

            <mat-card-header class="d-flex align-items-center justify-content-between mb-2">
              <h5 class="flex-grow-1 user-head">Feeder Configuration</h5>
              <button mat-mini-fab color="primary" style="margin-top: -5px;" (click)="openFeederDialog()" *ngIf="userType=='Admin'"><mat-icon>add</mat-icon></button>
            </mat-card-header>

						<div class="table-container" style="overflow: auto; max-height:68vh;">
              <table mat-table [dataSource]="feederData" matSort class="custom-theme-table mat-table">
                <ng-container matColumnDef="feederuid">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Feeder UID</th>
                    <td mat-cell *matCellDef="let element">{{ element.feederUid }}</td>
                </ng-container>
                
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>
                
                <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
                    <td mat-cell *matCellDef="let element">{{ element.location}}</td>
                </ng-container>

                <ng-container matColumnDef="group">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Group Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.groupName }}</td>
                </ng-container>

                <ng-container matColumnDef="groupname">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Virtual Group Name</th>
                  <td mat-cell *matCellDef="let element">{{ element.virtualGroupName }}</td>
              </ng-container>
              
              <ng-container matColumnDef="threshold">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Threshold Value</th>
                  <td mat-cell *matCellDef="let element">{{ element.thresholdValue }}</td>
              </ng-container>

              <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="updateFeederDialog(element)">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="deleteDevice(element)">
                      <mat-icon style="margin-right: 5px;">delete</mat-icon>
                    </button>
                  </td>
              </ng-container>

                <tr mat-header-row *matHeaderRowDef="feederColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: feederColumns"></tr>
              </table>
            </div>
            <mat-paginator #feederPaginator [pageSize]="10" showFirstLastButtons></mat-paginator>

          </mat-tab>


          <mat-tab label="Alert & Event">

            <mat-card-header class="d-flex align-items-center justify-content-between mb-2">
              <h5 class="flex-grow-1 user-head">Alert & Event</h5>
              <button mat-mini-fab color="primary" style="margin-top: -5px;" (click)="openAlertDialog()" *ngIf="userType=='Admin'"><mat-icon>add</mat-icon></button>
            </mat-card-header>

						<div class="table-container" style="overflow: auto; max-height:68vh;">
              <table mat-table [dataSource]="alertData" matSort class="custom-theme-table mat-table">
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.name }}</td>
                </ng-container>
                
                <ng-container matColumnDef="feedername">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Feeder Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.feederName }}</td>
                </ng-container>
                
                <ng-container matColumnDef="parameter">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Parameter</th>
                    <td mat-cell *matCellDef="let element">{{ element.parameter}}</td>
                </ng-container>

                <ng-container matColumnDef="condition">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Condition</th>
                  <td mat-cell *matCellDef="let element">{{ element.condition }}</td>
              </ng-container>
              
              <ng-container matColumnDef="threshold">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Threshold</th>
                  <td mat-cell *matCellDef="let element">{{ element.threshold }}</td>
              </ng-container>
              
              <ng-container matColumnDef="repeat">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Repeat</th>
                  <td mat-cell *matCellDef="let element">{{ element.repeat}}</td>
              </ng-container>

              <ng-container matColumnDef="start">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Time</th>
                <td mat-cell *matCellDef="let element">{{ element.formattedStartTime }}</td>
              </ng-container>

              <ng-container matColumnDef="end">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>End Time</th>
                <td mat-cell *matCellDef="let element">{{ element.formattedEndTime }}</td>
              </ng-container>
              
              <ng-container matColumnDef="sms">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Message</th>
                <td mat-cell *matCellDef="let element">{{ element.message }}</td>
              </ng-container>
              
              <ng-container matColumnDef="username">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>User Name</th>
                <td mat-cell *matCellDef="let element">{{ element.userName }}</td>
              </ng-container>

              <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="updateAlertDialog(element)">
                      <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="deleteAlert(element)">
                      <mat-icon style="margin-right: 5px;">delete</mat-icon>
                    </button>
                  </td>
              </ng-container>

                <tr mat-header-row *matHeaderRowDef="alertColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: alertColumns"></tr>
              </table>
            </div>
            <mat-paginator #alertPaginator [pageSize]="10" showFirstLastButtons></mat-paginator>

          </mat-tab>


          <mat-tab label="Day & Shift">

            <mat-card-header class="d-flex align-items-center justify-content-between mb-2">
              <h5 class="flex-grow-1 user-head">Day & Shift</h5>
              <button mat-mini-fab color="primary" style="margin-top: -5px;" (click)="openShiftDialog()" *ngIf="userType=='Admin'"><mat-icon>add</mat-icon></button>
            </mat-card-header>

						<div class="table-container" style="overflow: auto; max-height:68vh;">
              <table mat-table [dataSource]="shiftData" matSort class="custom-theme-table mat-table">
                <ng-container matColumnDef="shiftcode">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Shift Name</th>
                    <td mat-cell *matCellDef="let element">{{ element.shiftName }}</td>
                </ng-container>
                
                <ng-container matColumnDef="start">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Start Time</th>
                    <td mat-cell *matCellDef="let element">{{ element.startTime }}</td>
                </ng-container>
                
                <ng-container matColumnDef="end">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>End Time</th>
                    <td mat-cell *matCellDef="let element">{{ element.endTime}}</td>
                </ng-container>

                <ng-container matColumnDef="total">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Duration</th>
                    <td mat-cell *matCellDef="let element">{{ element.totalDuration }}</td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Action</th>
                    <td mat-cell *matCellDef="let element">
                      <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="updateShiftDialog(element)">
                        <mat-icon>edit</mat-icon>
                      </button>
                      <button mat-icon-button color="dark" style="white-space: nowrap;" (click)="deleteShift(element)">
                        <mat-icon style="margin-right: 5px;">delete</mat-icon>
                      </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="shiftColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: shiftColumns"></tr>
              </table>
            </div>
            <mat-paginator #shiftPaginator [pageSize]="10" showFirstLastButtons></mat-paginator>
          </mat-tab>
        </mat-tab-group>
      </mat-card-content>
    </mat-card>
  </div>  
</div>
